function calcTime(e){const t=document.querySelector(".am-pm"),r=document.querySelector(".date");let a;a=e.includes(":30")?e.replace(":30",".5"):e.includes(":45")?e.replace(":45",".75"):e.replace(":","."),buildWatch(!0,a).then(e=>{t.textContent=e[0].split(":")[0]>12?"PM":"AM",r.textContent=e[1]})}function afterTimeZoneSelection(e){const t=document.querySelector(".filter-div"),r=document.querySelector(".current-zone"),a=document.querySelector(".dst-info"),n=document.querySelector('input[name="country"]'),o=document.querySelector('input[type="checkbox"][name="checkLike"]');o.checked=!1,emptyParent(t),n.value="",r.textContent=`Current zone: ${e.country}`;const c=document.querySelector("#day-saving-checkbox");a.innerHTML=formatDSTinfo(e),c.checked=!1,c.disabled="-"===e.DST;const s=JSON.parse(localStorage.getItem("fav-array"))||[],i=s.filter(e=>e.country===r.textContent.split("zone: ")[1])[0];i&&(o.checked=!0)}function formatDSTinfo(e){if("-"!==e.DST){let t,r;return"Chatham Islands (New Zealand)"!==e.country&&"Iran"!==e.country?(t=e.DSTperiodStartEnd.split(":00 ")[0]+":00",r=e.DSTperiodStartEnd.split(":00 ")[1]):"Chatham Islands (New Zealand)"===e.country?(t=e.DSTperiodStartEnd.split(":45 ")[0]+":45",r=e.DSTperiodStartEnd.split(":45 ")[1]):e.country,`<div class="start"><span>Starts on:</span><span>${t}</span></div>\n          <div class="end"><span>Ends on:</span><span>${r}</span></div>`}return""}function emptyParent(e){for(;0!==e.children.length;)e.childNodes[0].remove()}import{buildWatch}from"./logic.min.js";import*as data from"./data.min.js";buildWatch().then(e=>{const t=document.querySelector(".am-pm"),r=document.querySelector(".date");document.querySelector(".watch").classList.remove("d-none"),t.classList.remove("d-none"),r.classList.remove("d-none"),t.textContent=e[0].split(":")[0]>12?"PM":"AM",r.textContent=e[1]}),"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("../sw_cached_site.js").catch(e=>console.log(`Service Worker: Error: ${e}`))});const input=document.querySelector('input[name="country"]');input.addEventListener("change",e=>{let t="";t=e.target.value.length>2?e.target.value.split(e.target.value.charAt(2))[0]:2===e.target.value.length?e.target.value:e.target.value+" ",window.persistSearch=t.toUpperCase();const r=document.querySelector("#day-saving-checkbox");r.addEventListener("change",e=>{const t=document.querySelector(".current-zone").textContent.split("zone: ")[1],r=data.data.filter(e=>e.country===t)[0];e.target.checked?calcTime(r.DST):calcTime(r.UTCoffset)});let a=[];data.data.forEach(t=>{t.country.toLowerCase().includes(e.target.value.toLowerCase())&&a.push(t)});const n=document.querySelector(".filter-div");a.length>1?(n.innerHTML="",a.forEach(e=>{n.innerHTML+=`<span class="filtered"><a>${e.country}</a></span>`}),n.querySelectorAll("a").forEach((e,t)=>{e.addEventListener("click",()=>{calcTime(a[t].UTCoffset),afterTimeZoneSelection(a[t])})})):1===a.length?(calcTime(a[0].UTCoffset),afterTimeZoneSelection(a[0])):n.textContent="Sorry, No match found."});const favTrigger=document.querySelector(".fav__trigger"),favOptWrapper=document.querySelector(".fav__option-wrapper");let favArray,persistPref;favTrigger.addEventListener("click",()=>{const e=JSON.parse(localStorage.getItem("fav-array"))||[],t=JSON.parse(localStorage.getItem("persist-pref"))||[];favOptWrapper.classList.toggle("show"),favOptWrapper.classList.contains("show")&&(emptyParent(favOptWrapper),t.forEach(e=>{favOptWrapper.innerHTML+=`<button class="fav__option">${e}</button>`})),Array.from(favOptWrapper.children).forEach(r=>{r.addEventListener("click",()=>{favOptWrapper.classList.toggle("show");const a=t.indexOf(r.textContent);a>-1&&(calcTime(e[a].UTCoffset),afterTimeZoneSelection(e[a]))})})});const likeBtn=document.querySelector('input[type="checkbox"][name="checkLike"]');likeBtn.addEventListener("change",e=>{favOptWrapper.classList.contains("show")&&favOptWrapper.classList.remove("show");let t=document.querySelector(".current-zone").textContent;if("Local"===t)return;t=t.split("zone: ")[1];const r=data.data.filter(e=>e.country===t)[0];if(!0===e.target.checked)favArray=JSON.parse(localStorage.getItem("fav-array"))||[],favArray.length>4&&(favArray.length=4),favArray.unshift(r),localStorage.setItem("fav-array",JSON.stringify(favArray)),persistPref=JSON.parse(localStorage.getItem("persist-pref"))||[],persistPref.length>4&&(persistPref.length=4),persistPref.unshift(window.persistSearch),localStorage.setItem("persist-pref",JSON.stringify(persistPref));else{favArray=JSON.parse(localStorage.getItem("fav-array")),persistPref=JSON.parse(localStorage.getItem("persist-pref"));const e=favArray.filter(e=>e.country===t)[0],r=favArray.filter(e=>e.country===t).length,a=favArray.indexOf(e);a>-1&&(favArray.splice(a,r),persistPref.splice(a,r)),localStorage.setItem("fav-array",JSON.stringify(favArray)),localStorage.setItem("persist-pref",JSON.stringify(persistPref))}});